## 跨站脚本攻击（XSS）

#### XSS 攻击方式

1. 存储型 XSS 攻击

   用户表单提交一段脚本，存在服务器，前端页面展示脚本代码。

2. 反射型 XSS 攻击

   用户请求提交一段脚本，服务器将脚本返回展示在页面。服务器不会存储脚本。相对存储型是一次性的。

3. 基于 DOM 的 XSS 攻击

   通过网络劫持，在网络传输的过程中，将用户所访问的html篡改。比如路由器，恶意软件等...

#### 预防 XSS

1. 服务器对输入脚本进行过滤或转码
2. 充分利用 CSP

   - 限制加载其他域下的资源文件，这样即使黑客插入了一个 JavaScript 文件，这个 JavaScript 文件也是无法被加载的；
   - 禁止向第三方域提交数据，这样用户数据也不会外泄；
   - 禁止执行内联脚本和未授权的脚本；
   - 还提供了上报机制，这样可以帮助我们尽快发现有哪些 XSS 攻击，以便尽快修复问题。

3. 使用 HttpOnly 属性

   由于很多 XSS 攻击都是来盗用 Cookie 的，因此还可以通过使用 HttpOnly 属性来保护我们 Cookie 的安全。

## CSRF攻击

和 XSS 不同的是，CSRF 攻击不需要将恶意代码注入用户的页面，仅仅是利用服务器的漏洞和用户的登录状态来实施攻击。

CSRF 攻击的三个必要条件：

- 第一个，目标站点一定要有 CSRF 漏洞；（比如某某银行网站）
- 第二个，用户要登录过目标站点，并且在浏览器上保持有该站点的登录状态；（登陆过某某银行网站，cookie 中有登录信息）
- 第三个，需要用户打开一个第三方站点，可以是黑客的站点，也可以是一些论坛；（这些网站或论坛的交互上有向某某银行发送请求的操作）
